<div class="card">
    <div class="card-header">
        Buscar facturas
    </div>
    <div class="card-body">
        <form action="">
            <div class="form-group row">
                <div class="col-sm-4">
                    <mat-form-field class="example-full-width">
                        <input type="text" placeholder="Nombre predio" aria-label="Number" matInput
                            [formControl]="myControl" [matAutocomplete]="auto">
                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="mostrarPredio"
                            (optionSelected)="seleccionarPredio($event)">
                            <mat-option *ngFor="let predio of filteredOptions | async" [value]="predio">
                                {{factura.predio.nombre}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>

                <div class="col-sm-4">
                    <mat-form-field class="ms-3">
                        <input matInput [matDatepicker]="picker" name="periodoFacturado"
                            placeholder="Periodo facturado">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker touchUi #picker></mat-datepicker>
                    </mat-form-field>
                </div>

                <div class="col-sm-4">
                    <label for="estadoFactura">Estado Facturas</label>
                    <select class="form-control" name="estadoFactura">
                        <option>---------Seleccionar-----------</option>
                        <option value="A">Factura pendiente de pago</option>
                        <option value="I">Facturas por pagar</option>
                        <option value="I">Facturas vencidas</option>
                    </select>
                </div>
            </div>
        </form>
    </div>
</div>
<mat-card> 
<div class="card" #content>
    <div class="card-header">
        <div class="row">
            <div class="col-sm-10">
                <h3>Listado de facturas</h3>
            </div>
            <div class="col-sm-2">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" routerLink = "/facturaForm">Generar Facturas</button>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div *ngIf="facturas.length == 0" class="alert alert-info">
            No hay facturas para mostrar en la base de datos!
        </div>
        <table class="table table-bordered table-striped" *ngIf="facturas.length>0">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Fecha Emisi√≥n</th>
                    <th>Periodo Facturado</th>
                    <th>Estado Factura</th>
                    <th>Valor Total</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let factura of facturas | paginate: { itemsPerPage: 7, currentPage: pageActual}">
                    <td>{{factura.id}}</td>
                    <td>{{factura.fechaEmision}}</td>
                    <td>{{factura.periodoFacturado | date:"MM/yyyy"}}</td>
                    <td>{{factura.estadoFactura}}</td>
                    <td>{{factura.granTotal | currency}}</td>
                    <td><button class="btn btn-danger mx-2" type="button" (click)="eliminar(factura)">X</button>
                        <button class="btn btn-success" type="button" (click)="open(factura)"> Ver</button></td>
                </tr>
            </tbody>
        </table>
        <pagination-controls (pageChange)="pageActual = $event" *ngIf="suscriptores?.length != 0"></pagination-controls>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click) = "downloadPDF()">Generar PDF</button>
        </div>
    </div>
</div>
</mat-card> 